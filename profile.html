<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact.com – Profile</title>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Inter", sans-serif; }

        body {
            background: #f2f4ff;
            color: #222;
            min-height: 100vh;
        }

        /* NAVBAR */
        .navbar {
            width: 100%;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #ffffff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .logo { font-size: 1.8rem; font-weight: 700; color: #222; }
        .logo span { color: #4a6cff; }

        .nav-links { display: flex; align-items: center; gap: 20px; }
        .nav-links a { text-decoration: none; color: #333; font-weight: 500; }

        /* HERO */
        .hero {
            width: 100%;
            padding: 60px 20px;
            background: linear-gradient(135deg, #4a6cff, #6f8cff);
            color: #fff;
            text-align: center;
        }

        .profile-pic {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #fff;
            margin-bottom: 20px;
            cursor: pointer;
            transition: 0.2s;
        }

        .profile-pic:hover {
            opacity: 0.8;
        }

        .hero h1 { font-size: 2.2rem; margin-bottom: 10px; }
        .hero p { font-size: 1.1rem; opacity: 0.9; }

        /* SECTIONS */
        .section {
            width: 90%;
            max-width: 900px;
            background: #fff;
            margin: 30px auto;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        .section h2 { color: #4a6cff; margin-bottom: 15px; }

        textarea, input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ccc;
            margin-top: 8px;
            font-size: 1rem;
        }

        /* GALLERY */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .gallery img, .gallery video {
            width: 100%;
            border-radius: 10px;
            object-fit: cover;
        }

        button {
            padding: 12px 20px;
            background: #4a6cff;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 15px;
        }

        .edit-btn { background: #222; }

        @media (max-width: 700px) {
            .nav-links { display: none; flex-direction: column; }
            .nav-links.show { display: flex; }
            .hamburger { display: flex; flex-direction: column; gap: 5px; cursor: pointer; }
            .hamburger span { width: 28px; height: 3px; background: #333; }
        }
    </style>
</head>

<body>

<nav class="navbar">
    <div class="logo">Contact<span>.</span>com</div>

    <div class="hamburger" onclick="toggleMenu()">
        <span></span><span></span><span></span>
    </div>

    <div class="nav-links">
        <a href="dashboard.html">Dashboard</a>
        <a href="communities.html">Communities</a>
        <a href="events.html">Events</a>
        <a href="profile.html">Profile</a>
        <a href="#" onclick="logout()">Logout</a>
    </div>
</nav>

<!-- HERO -->
<div class="hero">
    <img id="profilePic" class="profile-pic" src="https://via.placeholder.com/150" />

    <input type="file" id="profilePicUpload" accept="image/*" style="display:none;" />

    <h1 id="fullNameDisplay">Your Name</h1>
    <p id="professionDisplay">Your profession or tagline</p>
</div>

<!-- EDITABLE SECTIONS -->
<div class="section">
    <h2>Full Name</h2>
    <input id="fullName" disabled />
</div>

<div class="section">
    <h2>Profession</h2>
    <input id="profession" disabled />
</div>

<div class="section">
    <h2>About Me</h2>
    <textarea id="about" rows="5" disabled></textarea>
</div>

<div class="section">
    <h2>Skills</h2>
    <input id="skills" disabled />
</div>

<div class="section">
    <h2>Work & Life</h2>
    <textarea id="workLife" rows="5" disabled></textarea>
</div>

<!-- GALLERY -->
<div class="section">
    <h2>Photos & Videos</h2>

    <input type="file" id="mediaUpload" accept="image/*,video/*" multiple style="display:none;" />
    <button onclick="document.getElementById('mediaUpload').click()">Upload Media</button>

    <div class="gallery" id="gallery"></div>
</div>

<!-- ACTION BUTTONS -->
<div class="section" style="text-align:center;">
    <button class="edit-btn" id="editBtn" onclick="enableEditing()">Edit Profile</button>
    <button id="saveBtn" onclick="saveProfile()" style="display:none;">Save Changes</button>
</div>

<script>
function toggleMenu() {
    document.querySelector('.nav-links').classList.toggle('show');
}

document.addEventListener("DOMContentLoaded", loadProfile);

function loadProfile() {
    const user = JSON.parse(localStorage.getItem("contact_user"));
    if (!user) return window.location.href = "login.html";

    // HERO
    document.getElementById("fullNameDisplay").innerText = user.fullName;
    document.getElementById("professionDisplay").innerText = user.profession || "Your profession";

    // FORM FIELDS
    document.getElementById("fullName").value = user.fullName;
    document.getElementById("profession").value = user.profession || "";
    document.getElementById("about").value = user.about || "";
    document.getElementById("skills").value = user.skills || "";
    document.getElementById("workLife").value = user.workLife || "";

    // PROFILE PIC
    if (user.profilePic) {
        document.getElementById("profilePic").src = user.profilePic;
    }

    // GALLERY
    const gallery = document.getElementById("gallery");
    gallery.innerHTML = "";

    if (user.gallery) {
        user.gallery.forEach(item => {
            const el = item.type === "video"
                ? document.createElement("video")
                : document.createElement("img");

            el.src = item.url;
            if (item.type === "video") el.controls = true;

            gallery.appendChild(el);
        });
    }
}

function enableEditing() {
    document.querySelectorAll("input, textarea").forEach(el => el.disabled = false);
    document.getElementById("saveBtn").style.display = "inline-block";
    document.getElementById("editBtn").style.display = "none";
}

/* ⭐ CLICK PROFILE PIC TO UPLOAD */
document.getElementById("profilePic").addEventListener("click", () => {
    document.getElementById("profilePicUpload").click();
});

document.getElementById("profilePicUpload").addEventListener("change", function(event) {
    const file = event.target.files[0];
    if (!file) return;

    const url = URL.createObjectURL(file);

    document.getElementById("profilePic").src = url;

    const user = JSON.parse(localStorage.getItem("contact_user"));
    user.profilePic = url;
    localStorage.setItem("contact_user", JSON.stringify(user));
});

/* ⭐ GALLERY UPLOAD */
document.getElementById("mediaUpload").addEventListener("change", function(event) {
    const files = Array.from(event.target.files);
    const user = JSON.parse(localStorage.getItem("contact_user"));

    if (!user.gallery) user.gallery = [];

    files.forEach(file => {
        const url = URL.createObjectURL(file);
        const type = file.type.startsWith("video") ? "video" : "image";

        user.gallery.push({ url, type });
    });

    localStorage.setItem("contact_user", JSON.stringify(user));
    loadProfile();
});

function saveProfile() {
    const user = JSON.parse(localStorage.getItem("contact_user"));

    user.fullName = document.getElementById("fullName").value;
    user.profession = document.getElementById("profession").value;
    user.about = document.getElementById("about").value;
    user.skills = document.getElementById("skills").value;
    user.workLife = document.getElementById("workLife").value;

    localStorage.setItem("contact_user", JSON.stringify(user));

    alert("Profile updated!");

    window.location.reload();
}

function logout() {
    localStorage.removeItem("contact_user");
    window.location.href = "index.html";
}
</script>

</body>
</html>